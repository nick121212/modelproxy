{"version":3,"sources":["webpack://modelproxy/webpack/universalModuleDefinition","webpack://modelproxy/webpack/bootstrap","webpack://modelproxy/./src/libs/base.factory.ts","webpack://modelproxy/./src/libs/compose.ts","webpack://modelproxy/./src/libs/errors.ts","webpack://modelproxy/./src/libs/engine.factory.ts","webpack://modelproxy/./src/engines/engine.base.ts","webpack://modelproxy/./src/engines/engine.def.ts","webpack://modelproxy/./src/engines/engine.cache.ts","webpack://modelproxy/external {\"root\":\"URLSearchParams\",\"amd\":\"url-search-params\",\"commonjs2\":\"url-search-params\",\"commonjs\":\"url-search-params\"}","webpack://modelproxy/external {\"root\":\"pathToRegexp\",\"amd\":\"path-to-regexp\",\"commonjs2\":\"path-to-regexp\",\"commonjs\":\"path-to-regexp\"}","webpack://modelproxy/./src/libs/interface.factory.ts","webpack://modelproxy/./src/libs/proxy.ts","webpack://modelproxy/./src/index.ts"],"names":["root","factory","exports","module","require","define","amd","modelproxy","URLSearchParams","pathToRegexp","window","__WEBPACK_EXTERNAL_MODULE__7__","__WEBPACK_EXTERNAL_MODULE__8__","t","installedModules","__webpack_require__","moduleId","i","l","threw","modules","call","m","c","d","name","getter","o","Object","defineProperty","enumerable","get","r","Symbol","toStringTag","value","mode","__esModule","ns","create","key","bind","n","default","object","property","prototype","hasOwnProperty","p","s","e","errors_1","BaseFactory","this","instances","add","intance","override","console","error","remove","has","use","engines","keys","ModelProxyMissingError","join","forEach","fn","constructor","Function","__awaiter","thisArg","_arguments","P","generator","Promise","resolve","reject","fulfilled","step","next","rejected","throw","result","done","then","apply","__generator","body","f","y","g","_","label","sent","trys","ops","verb","return","iterator","v","op","TypeError","pop","length","push","Compose","wares","_i","arguments","middlewares","slice","func","clear","compose","_this","Array","isArray","middlewares_1","context","index","dispatch","e_1","_a","Error","getMiddlewares","concat","merge","top","unshift","errorHandle","ctx","err","isError","callback","complete","options","err_1","assign","content","__extends","extendStatics","setPrototypeOf","__proto__","b","__","BaseError","message","stack","_super","base_factory_1","engine_def_1","engineFactory","DefaultEngine","compose_1","BaseEngine","validate","_instance","_options","delay","interval","setTimeout","proxy","instance","otherOptions","getPath","getStatePath","states","state","replacePath","_b","params","_c","data","paths","parse","path","token","getFullPath","url","searchParams","append","qs","toString","engine_base_1","doProxy","executeInfo","before","after","catch","promiseFactory","cacheDec","fetchPromise","fullPath","settings","cache","_d","reload","_e","expire","_f","method","proKey","_g","_h","promise","promiseInCache","_j","expireInCache","_k","cacheIn","Date","now","fromCache","engine_factory_1","InterfaceFactory","overrideInterfaceConfig","delete","custom","execute","getOne","post","put","engine","iinstance","extraInstance","engineName","defaultExecuteInfo","megreInstance","type","id","__id__","extendInstance","executeEngineMethod","methodFunc","interface_factory_1","ModelProxy","nsFactory","addEngines","loadConfig","config","initInterfaces","interfaces","getNs","executeAll","inters","maps","all","reduce","prev","race","map","inter","hasNs","mixin","idKeys","lastKey","lastInterface","k","ids","idx","ifFactory","interModel","mockDir","proxy_1","engine_cache_1"],"mappings":"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","file":"index.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory(require(\"url-search-params\"), require(\"path-to-regexp\"));\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([\"url-search-params\", \"path-to-regexp\"], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"modelproxy\"] = factory(require(\"url-search-params\"), require(\"path-to-regexp\"));\n\telse\n\t\troot[\"modelproxy\"] = factory(root[\"URLSearchParams\"], root[\"pathToRegexp\"]);\n})(window, function(__WEBPACK_EXTERNAL_MODULE__7__, __WEBPACK_EXTERNAL_MODULE__8__) {\nreturn "," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tvar threw = true;\n \t\ttry {\n \t\t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n \t\t\tthrew = false;\n \t\t} finally {\n \t\t\tif(threw) delete installedModules[moduleId];\n \t\t}\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 11);\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar errors_1 = require(\"./errors\");\nvar BaseFactory = (function () {\n    function BaseFactory() {\n        this.instances = {};\n    }\n    BaseFactory.prototype.add = function (name, intance, override) {\n        if (override === void 0) { override = false; }\n        if (override && this.instances.hasOwnProperty(name)) {\n            return console.error(\"\\u5DF2\\u7ECF\\u5B58\\u5728name=\\u3010\" + name + \"\\u3011\\u7684engine\\uFF01\");\n        }\n        this.instances[name] = intance;\n    };\n    BaseFactory.prototype.remove = function (name) {\n        if (this.has(name)) {\n            delete this.instances[name];\n        }\n    };\n    BaseFactory.prototype.has = function (name) {\n        return !!this.get(name);\n    };\n    BaseFactory.prototype.get = function (name) {\n        if (this.instances.hasOwnProperty(name)) {\n            return this.instances[name];\n        }\n        return null;\n    };\n    BaseFactory.prototype.use = function (name) {\n        if (!name || !this.instances.hasOwnProperty(name)) {\n            var engines = Object.keys(this.instances);\n            throw new errors_1.ModelProxyMissingError(\"\\u4E0D\\u5B58\\u5728name=\\u3010\" + name + \"\\u3011\\u7684engine\\uFF01\\u5F53\\u524Dengines\\uFF1A\\u3010\" + engines.join(\",\") + \"\\u3011\");\n        }\n        return this.instances[name];\n    };\n    BaseFactory.prototype.forEach = function (fn) {\n        if (!fn || fn.constructor !== Function) {\n            return;\n        }\n        for (var key in this.instances) {\n            if (this.instances.hasOwnProperty(key)) {\n                var element = this.instances[key];\n                fn(key, element);\n            }\n        }\n    };\n    return BaseFactory;\n}());\nexports.BaseFactory = BaseFactory;\n","\"use strict\";\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : new P(function (resolve) { resolve(result.value); }).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nvar __generator = (this && this.__generator) || function (thisArg, body) {\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\n    function verb(n) { return function (v) { return step([n, v]); }; }\n    function step(op) {\n        if (f) throw new TypeError(\"Generator is already executing.\");\n        while (_) try {\n            if (f = 1, y && (t = y[op[0] & 2 ? \"return\" : op[0] ? \"throw\" : \"next\"]) && !(t = t.call(y, op[1])).done) return t;\n            if (y = 0, t) op = [0, t.value];\n            switch (op[0]) {\n                case 0: case 1: t = op; break;\n                case 4: _.label++; return { value: op[1], done: false };\n                case 5: _.label++; y = op[1]; op = [0]; continue;\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\n                default:\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\n                    if (t[2]) _.ops.pop();\n                    _.trys.pop(); continue;\n            }\n            op = body.call(thisArg, _);\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\n    }\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar Compose = (function () {\n    function Compose() {\n        var wares = [];\n        for (var _i = 0; _i < arguments.length; _i++) {\n            wares[_i] = arguments[_i];\n        }\n        this.middlewares = wares.slice();\n    }\n    Compose.prototype.use = function (func) {\n        if (typeof func !== \"function\") {\n            throw new TypeError(\"middleware must be a function！\");\n        }\n        this.middlewares.push(func);\n    };\n    Compose.prototype.clear = function () {\n        this.middlewares.length = 0;\n    };\n    Compose.prototype.compose = function () {\n        var _this = this;\n        var middlewares = this.middlewares;\n        if (!Array.isArray(middlewares)) {\n            throw new TypeError(\"Middleware stack must be an array!\");\n        }\n        for (var _i = 0, middlewares_1 = middlewares; _i < middlewares_1.length; _i++) {\n            var fn = middlewares_1[_i];\n            if (typeof fn !== \"function\") {\n                throw new TypeError(\"Middleware must be composed of functions!\");\n            }\n        }\n        return function (context, next) {\n            return new Promise(function (resolve, reject) {\n                var index = -1;\n                var dispatch = function (i) { return __awaiter(_this, void 0, void 0, function () {\n                    var _this = this;\n                    var fn, e_1;\n                    return __generator(this, function (_a) {\n                        switch (_a.label) {\n                            case 0:\n                                fn = middlewares[i];\n                                if (i <= index) {\n                                    return [2, reject(new Error(\"next() called multiple times\" + i + \"-\" + index))];\n                                }\n                                index = i;\n                                if (i === middlewares.length) {\n                                    fn = next;\n                                }\n                                if (!fn) {\n                                    return [2, context];\n                                }\n                                _a.label = 1;\n                            case 1:\n                                _a.trys.push([1, 3, , 4]);\n                                return [4, fn(context, function (key) { return __awaiter(_this, void 0, void 0, function () {\n                                        return __generator(this, function (_a) {\n                                            switch (_a.label) {\n                                                case 0:\n                                                    if (key === \"abort\") {\n                                                        return [2, resolve(context)];\n                                                    }\n                                                    return [4, dispatch(i + 1)];\n                                                case 1:\n                                                    _a.sent();\n                                                    return [2];\n                                            }\n                                        });\n                                    }); })];\n                            case 2:\n                                _a.sent();\n                                return [3, 4];\n                            case 3:\n                                e_1 = _a.sent();\n                                reject(e_1);\n                                return [3, 4];\n                            case 4: return [2];\n                        }\n                    });\n                }); };\n                return dispatch(0).then(resolve.bind(context));\n            });\n        };\n    };\n    Compose.prototype.getMiddlewares = function () {\n        return this.middlewares.concat([]);\n    };\n    Compose.prototype.merge = function (c, top) {\n        var _this = this;\n        if (top === void 0) { top = false; }\n        var middles = c.getMiddlewares();\n        middles.forEach(function (m) {\n            if (top) {\n                _this.middlewares.unshift(m);\n            }\n            else {\n                _this.use(m);\n            }\n        });\n        return this;\n    };\n    Compose.prototype.errorHandle = function (ctx, err) {\n        ctx.isError = true;\n        ctx.err = err;\n    };\n    Compose.prototype.callback = function (complete) {\n        var _this = this;\n        var fn = this.compose();\n        return function (options) { return __awaiter(_this, void 0, void 0, function () {\n            var _this = this;\n            var ctx, err_1;\n            return __generator(this, function (_a) {\n                switch (_a.label) {\n                    case 0:\n                        ctx = Object.assign(options || {}, {});\n                        _a.label = 1;\n                    case 1:\n                        _a.trys.push([1, 3, , 4]);\n                        return [4, fn(ctx, function (content, next) { return __awaiter(_this, void 0, void 0, function () {\n                                return __generator(this, function (_a) {\n                                    switch (_a.label) {\n                                        case 0: return [4, next()];\n                                        case 1:\n                                            _a.sent();\n                                            if (ctx.isError) {\n                                                throw ctx.err;\n                                            }\n                                            return [2];\n                                    }\n                                });\n                            }); })];\n                    case 2:\n                        _a.sent();\n                        return [3, 4];\n                    case 3:\n                        err_1 = _a.sent();\n                        this.errorHandle(ctx, err_1);\n                        return [3, 4];\n                    case 4: return [2, ctx];\n                }\n            });\n        }); };\n    };\n    return Compose;\n}());\nexports.Compose = Compose;\n","\"use strict\";\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = Object.setPrototypeOf ||\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar BaseError = (function () {\n    function BaseError(message) {\n        this.name = \"\";\n        this.message = message ? message : \"\";\n        this.stack = (new Error()).stack;\n    }\n    return BaseError;\n}());\nexports.BaseError = BaseError;\nvar ModelProxyMissingError = (function (_super) {\n    __extends(ModelProxyMissingError, _super);\n    function ModelProxyMissingError(message) {\n        var _this = _super.call(this, message) || this;\n        _this.name = \"ModelProxy.MissingError\";\n        return _this;\n    }\n    return ModelProxyMissingError;\n}(BaseError));\nexports.ModelProxyMissingError = ModelProxyMissingError;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar base_factory_1 = require(\"./base.factory\");\nvar engine_def_1 = require(\"../engines/engine.def\");\nexports.engineFactory = new base_factory_1.BaseFactory();\nexports.engineFactory.add(\"default\", new engine_def_1.DefaultEngine());\n","\"use strict\";\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = Object.setPrototypeOf ||\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : new P(function (resolve) { resolve(result.value); }).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nvar __generator = (this && this.__generator) || function (thisArg, body) {\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\n    function verb(n) { return function (v) { return step([n, v]); }; }\n    function step(op) {\n        if (f) throw new TypeError(\"Generator is already executing.\");\n        while (_) try {\n            if (f = 1, y && (t = y[op[0] & 2 ? \"return\" : op[0] ? \"throw\" : \"next\"]) && !(t = t.call(y, op[1])).done) return t;\n            if (y = 0, t) op = [0, t.value];\n            switch (op[0]) {\n                case 0: case 1: t = op; break;\n                case 4: _.label++; return { value: op[1], done: false };\n                case 5: _.label++; y = op[1]; op = [0]; continue;\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\n                default:\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\n                    if (t[2]) _.ops.pop();\n                    _.trys.pop(); continue;\n            }\n            op = body.call(thisArg, _);\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\n    }\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar pathToRegexp = require(\"path-to-regexp\");\nvar URLSearchParams = require(\"url-search-params\");\nvar compose_1 = require(\"../libs/compose\");\nvar errors_1 = require(\"../libs/errors\");\nvar BaseEngine = (function (_super) {\n    __extends(BaseEngine, _super);\n    function BaseEngine() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    BaseEngine.prototype.validate = function (_instance, _options) {\n        return __awaiter(this, void 0, void 0, function () {\n            return __generator(this, function (_a) {\n                return [2, true];\n            });\n        });\n    };\n    BaseEngine.prototype.delay = function (interval) {\n        return __awaiter(this, void 0, void 0, function () {\n            return __generator(this, function (_a) {\n                return [2, new Promise(function (resolve, reject) {\n                        setTimeout(function () {\n                            resolve();\n                        }, interval);\n                    })];\n            });\n        });\n    };\n    BaseEngine.prototype.proxy = function (instance, options) {\n        var otherOptions = [];\n        for (var _i = 2; _i < arguments.length; _i++) {\n            otherOptions[_i - 2] = arguments[_i];\n        }\n        return __awaiter(this, void 0, void 0, function () {\n            return __generator(this, function (_a) {\n                instance.getPath(options.instance);\n                return [2, {}];\n            });\n        });\n    };\n    BaseEngine.prototype.getStatePath = function (instance) {\n        if (instance.states && instance.state) {\n            return instance.states[instance.state] || \"\";\n        }\n        return \"\";\n    };\n    BaseEngine.prototype.replacePath = function (instance, _a) {\n        var _b = _a.params, params = _b === void 0 ? [] : _b, _c = _a.data, data = _c === void 0 ? {} : _c;\n        var tokens = pathToRegexp.parse(instance.path), paths = [];\n        tokens.forEach(function (token) {\n            var name = token.name;\n            if (!name) {\n                paths.push(token);\n            }\n            else {\n                if (!params[name] && !data[name]) {\n                    throw new errors_1.ModelProxyMissingError(\"\\u7F3A\\u5C11[\" + name + \"]\\u5B57\\u6BB5\\uFF01\");\n                }\n                paths.push(\"/\" + (params[name] || data[name]));\n                delete params[name];\n            }\n        });\n        return paths.join(\"\");\n    };\n    BaseEngine.prototype.getFullPath = function (instance, options) {\n        var url = [this.getStatePath(instance), this.replacePath(instance, options)], searchParams = new URLSearchParams();\n        if (options.params) {\n            Object.keys(options.params).forEach(function (key) {\n                searchParams.append(key, options.params[key]);\n            });\n            var qs = searchParams.toString();\n            if (qs) {\n                url.push(\"?\" + qs);\n            }\n        }\n        return url.join(\"\");\n    };\n    return BaseEngine;\n}(compose_1.Compose));\nexports.BaseEngine = BaseEngine;\n","\"use strict\";\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = Object.setPrototypeOf ||\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : new P(function (resolve) { resolve(result.value); }).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nvar __generator = (this && this.__generator) || function (thisArg, body) {\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\n    function verb(n) { return function (v) { return step([n, v]); }; }\n    function step(op) {\n        if (f) throw new TypeError(\"Generator is already executing.\");\n        while (_) try {\n            if (f = 1, y && (t = y[op[0] & 2 ? \"return\" : op[0] ? \"throw\" : \"next\"]) && !(t = t.call(y, op[1])).done) return t;\n            if (y = 0, t) op = [0, t.value];\n            switch (op[0]) {\n                case 0: case 1: t = op; break;\n                case 4: _.label++; return { value: op[1], done: false };\n                case 5: _.label++; y = op[1]; op = [0]; continue;\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\n                default:\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\n                    if (t[2]) _.ops.pop();\n                    _.trys.pop(); continue;\n            }\n            op = body.call(thisArg, _);\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\n    }\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar engine_base_1 = require(\"./engine.base\");\nvar compose_1 = require(\"../libs/compose\");\nvar DefaultEngine = (function (_super) {\n    __extends(DefaultEngine, _super);\n    function DefaultEngine() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    DefaultEngine.prototype.doProxy = function (instance, executeInfo) {\n        var otherOptions = [];\n        for (var _i = 2; _i < arguments.length; _i++) {\n            otherOptions[_i - 2] = arguments[_i];\n        }\n        return __awaiter(this, void 0, void 0, function () {\n            var c, before, after, error, ctx;\n            return __generator(this, function (_a) {\n                switch (_a.label) {\n                    case 0:\n                        c = new compose_1.Compose();\n                        before = executeInfo.before, after = executeInfo.after, error = executeInfo.error;\n                        if (before) {\n                            c.merge(before);\n                        }\n                        c.merge(this);\n                        if (after) {\n                            c.merge(after);\n                        }\n                        return [4, c.callback()(Object.assign.apply(Object, [{}].concat(otherOptions, [{\n                                    executeInfo: executeInfo,\n                                    instance: instance,\n                                }])))];\n                    case 1:\n                        ctx = _a.sent();\n                        if (!ctx.isError) return [3, 4];\n                        if (!error) return [3, 3];\n                        return [4, error.callback()(ctx).catch(function () { return void (0); })];\n                    case 2:\n                        _a.sent();\n                        _a.label = 3;\n                    case 3: throw ctx.err;\n                    case 4: return [2, ctx];\n                }\n            });\n        });\n    };\n    DefaultEngine.prototype.proxy = function (instance, executeInfo) {\n        var otherOptions = [];\n        for (var _i = 2; _i < arguments.length; _i++) {\n            otherOptions[_i - 2] = arguments[_i];\n        }\n        return __awaiter(this, void 0, void 0, function () {\n            return __generator(this, function (_a) {\n                return [2, this.doProxy.apply(this, [instance, executeInfo].concat(otherOptions))];\n            });\n        });\n    };\n    return DefaultEngine;\n}(engine_base_1.BaseEngine));\nexports.DefaultEngine = DefaultEngine;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar base_factory_1 = require(\"../libs/base.factory\");\nexports.promiseFactory = new base_factory_1.BaseFactory();\nexports.cacheDec = function (fetchPromise, ctx, fullPath) {\n    var _a = ctx.executeInfo, executeInfo = _a === void 0 ? {} : _a, instance = ctx.instance;\n    var settings = executeInfo.settings;\n    var _b = settings || {}, _c = _b.cache, cache = _c === void 0 ? false : _c, _d = _b.reload, reload = _d === void 0 ? false : _d, _e = _b.expire, expire = _e === void 0 ? undefined : _e, _f = (instance || {}).method, method = _f === void 0 ? \"\" : _f, proKey = fullPath + method;\n    if (!cache) {\n        return fetchPromise();\n    }\n    if (reload) {\n        exports.promiseFactory.remove(proKey);\n    }\n    var dataInCache = exports.promiseFactory.get(proKey);\n    var _g = dataInCache || {}, _h = _g.promise, promiseInCache = _h === void 0 ? null : _h, _j = _g.expire, expireInCache = _j === void 0 ? null : _j, _k = _g.cacheIn, cacheIn = _k === void 0 ? 0 : _k;\n    if (expireInCache && cacheIn) {\n        if (cacheIn + expireInCache < Date.now()) {\n            exports.promiseFactory.remove(proKey);\n            promiseInCache = null;\n        }\n    }\n    if (promiseInCache) {\n        ctx.fromCache = true;\n        return promiseInCache;\n    }\n    var promise = fetchPromise();\n    exports.promiseFactory.add(proKey, { promise: promise, expire: expire, cacheIn: Date.now() });\n    return promise;\n};\n","module.exports = __WEBPACK_EXTERNAL_MODULE__7__;","module.exports = __WEBPACK_EXTERNAL_MODULE__8__;","\"use strict\";\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = Object.setPrototypeOf ||\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : new P(function (resolve) { resolve(result.value); }).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nvar __generator = (this && this.__generator) || function (thisArg, body) {\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\n    function verb(n) { return function (v) { return step([n, v]); }; }\n    function step(op) {\n        if (f) throw new TypeError(\"Generator is already executing.\");\n        while (_) try {\n            if (f = 1, y && (t = y[op[0] & 2 ? \"return\" : op[0] ? \"throw\" : \"next\"]) && !(t = t.call(y, op[1])).done) return t;\n            if (y = 0, t) op = [0, t.value];\n            switch (op[0]) {\n                case 0: case 1: t = op; break;\n                case 4: _.label++; return { value: op[1], done: false };\n                case 5: _.label++; y = op[1]; op = [0]; continue;\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\n                default:\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\n                    if (t[2]) _.ops.pop();\n                    _.trys.pop(); continue;\n            }\n            op = body.call(thisArg, _);\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\n    }\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar base_factory_1 = require(\"./base.factory\");\nvar engine_factory_1 = require(\"./engine.factory\");\nvar InterfaceFactory = (function (_super) {\n    __extends(InterfaceFactory, _super);\n    function InterfaceFactory(overrideInterfaceConfig) {\n        var _this = _super.call(this) || this;\n        _this.overrideInterfaceConfig = overrideInterfaceConfig;\n        return _this;\n    }\n    InterfaceFactory.prototype.add = function (name, instance, override) {\n        if (override === void 0) { override = false; }\n        _super.prototype.add.call(this, name, Object.assign(instance, {\n            delete: this.custom.bind(this, instance, \"DELETE\"),\n            execute: this.execute.bind(this, instance),\n            get: this.custom.bind(this, instance, \"GET\", null),\n            getFullPath: this.getFullPath.bind(this, instance),\n            getOne: this.custom.bind(this, instance, \"GET\"),\n            getPath: this.getPath.bind(this, instance),\n            post: this.custom.bind(this, instance, \"POST\", null),\n            put: this.custom.bind(this, instance, \"PUT\"),\n            replacePath: this.replacePath.bind(this, instance)\n        }), override);\n    };\n    InterfaceFactory.prototype.execute = function (instance, options) {\n        var otherOptions = [];\n        for (var _i = 2; _i < arguments.length; _i++) {\n            otherOptions[_i - 2] = arguments[_i];\n        }\n        return __awaiter(this, void 0, void 0, function () {\n            var engine, iinstance, _a, extraInstance, engineName, _b, defaultExecuteInfo, e_1;\n            return __generator(this, function (_c) {\n                switch (_c.label) {\n                    case 0:\n                        _a = options.instance, extraInstance = _a === void 0 ? {} : _a;\n                        iinstance = this.megreInstance(instance, extraInstance);\n                        engineName = iinstance.engine, _b = iinstance.defaultExecuteInfo, defaultExecuteInfo = _b === void 0 ? {} : _b;\n                        if (!engine_factory_1.engineFactory.has(engineName || \"\")) {\n                            throw new Error(\"\\u6CA1\\u6709\\u53D1\\u73B0engine[\" + engineName + \"]\");\n                        }\n                        engine = engine_factory_1.engineFactory.use(engineName || \"default\");\n                        _c.label = 1;\n                    case 1:\n                        _c.trys.push([1, 3, , 4]);\n                        return [4, engine.validate(iinstance, options)];\n                    case 2:\n                        _c.sent();\n                        return [3, 4];\n                    case 3:\n                        e_1 = _c.sent();\n                        throw e_1;\n                    case 4: return [2, engine.proxy.apply(engine, [iinstance, Object.assign({}, defaultExecuteInfo, options)].concat(otherOptions))];\n                }\n            });\n        });\n    };\n    InterfaceFactory.prototype.custom = function (instance, type, id, options) {\n        if (options === void 0) { options = {}; }\n        var otherOptions = [];\n        for (var _i = 4; _i < arguments.length; _i++) {\n            otherOptions[_i - 4] = arguments[_i];\n        }\n        return __awaiter(this, void 0, void 0, function () {\n            var _a, extraInstance, _b, params, iiinstance;\n            return __generator(this, function (_c) {\n                switch (_c.label) {\n                    case 0:\n                        _a = options.instance, extraInstance = _a === void 0 ? {} : _a, _b = options.params, params = _b === void 0 ? {} : _b;\n                        extraInstance.method = type;\n                        if (id) {\n                            extraInstance.path = (extraInstance.path || instance.path) + \"/:__id__\";\n                            params.__id__ = id;\n                        }\n                        options.instance = extraInstance;\n                        options.params = params;\n                        return [4, this.execute.apply(this, [instance, options].concat(otherOptions))];\n                    case 1: return [2, _c.sent()];\n                }\n            });\n        });\n    };\n    InterfaceFactory.prototype.megreInstance = function (instance, extendInstance) {\n        if (extendInstance === void 0) { extendInstance = {}; }\n        return Object.assign({}, instance, extendInstance);\n    };\n    InterfaceFactory.prototype.executeEngineMethod = function (instance, extendInstance, method, options) {\n        if (extendInstance === void 0) { extendInstance = {}; }\n        if (options === void 0) { options = {}; }\n        var engine, methodFunc, iinstance;\n        iinstance = this.megreInstance(instance, extendInstance);\n        engine = engine_factory_1.engineFactory.use(\"default\");\n        methodFunc = engine[method];\n        if (methodFunc) {\n            return methodFunc.call(engine, iinstance, options);\n        }\n        return \"\";\n    };\n    InterfaceFactory.prototype.getPath = function (instance, extendInstance) {\n        if (extendInstance === void 0) { extendInstance = {}; }\n        var engine, iinstance;\n        iinstance = this.megreInstance(instance, extendInstance);\n        return this.executeEngineMethod(instance, extendInstance, \"getStatePath\") + iinstance.path;\n    };\n    InterfaceFactory.prototype.getFullPath = function (instance, options) {\n        if (options === void 0) { options = {}; }\n        return this.executeEngineMethod(instance, options.instance, \"getFullPath\", options);\n    };\n    InterfaceFactory.prototype.replacePath = function (instance, options) {\n        if (options === void 0) { options = {}; }\n        var engine, iinstance;\n        iinstance = this.megreInstance(instance, options.instance);\n        engine = engine_factory_1.engineFactory.use(\"default\");\n        return engine.replacePath(iinstance, options);\n    };\n    return InterfaceFactory;\n}(base_factory_1.BaseFactory));\nexports.InterfaceFactory = InterfaceFactory;\n","\"use strict\";\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = Object.setPrototypeOf ||\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : new P(function (resolve) { resolve(result.value); }).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nvar __generator = (this && this.__generator) || function (thisArg, body) {\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\n    function verb(n) { return function (v) { return step([n, v]); }; }\n    function step(op) {\n        if (f) throw new TypeError(\"Generator is already executing.\");\n        while (_) try {\n            if (f = 1, y && (t = y[op[0] & 2 ? \"return\" : op[0] ? \"throw\" : \"next\"]) && !(t = t.call(y, op[1])).done) return t;\n            if (y = 0, t) op = [0, t.value];\n            switch (op[0]) {\n                case 0: case 1: t = op; break;\n                case 4: _.label++; return { value: op[1], done: false };\n                case 5: _.label++; y = op[1]; op = [0]; continue;\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\n                default:\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\n                    if (t[2]) _.ops.pop();\n                    _.trys.pop(); continue;\n            }\n            op = body.call(thisArg, _);\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\n    }\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar interface_factory_1 = require(\"./interface.factory\");\nvar engine_factory_1 = require(\"./engine.factory\");\nvar compose_1 = require(\"./compose\");\nvar errors_1 = require(\"./errors\");\nvar base_factory_1 = require(\"./base.factory\");\nvar ModelProxy = (function (_super) {\n    __extends(ModelProxy, _super);\n    function ModelProxy(defaultExecuteInfo) {\n        var _this = _super.call(this) || this;\n        _this.defaultExecuteInfo = defaultExecuteInfo;\n        _this.nsFactory = new base_factory_1.BaseFactory();\n        _this.forEach = _this.nsFactory.forEach.bind(_this.nsFactory);\n        return _this;\n    }\n    ModelProxy.prototype.addEngines = function (engines) {\n        for (var key in engines) {\n            if (engines.hasOwnProperty(key)) {\n                engine_factory_1.engineFactory.add(key, engines[key], true);\n            }\n        }\n        return this;\n    };\n    ModelProxy.prototype.loadConfig = function (config, overrideInterfaceConfig) {\n        if (overrideInterfaceConfig === void 0) { overrideInterfaceConfig = {}; }\n        var nsFactory = this.nsFactory.get(config.key);\n        if (!nsFactory) {\n            nsFactory = new interface_factory_1.InterfaceFactory(overrideInterfaceConfig);\n        }\n        this.nsFactory.add(config.key, this.initInterfaces(nsFactory, config, Object.assign({}, nsFactory.overrideInterfaceConfig || {}, overrideInterfaceConfig)));\n        return this;\n    };\n    ModelProxy.prototype.execute = function (ns, key, options) {\n        if (options === void 0) { options = {}; }\n        var otherOptions = [];\n        for (var _i = 3; _i < arguments.length; _i++) {\n            otherOptions[_i - 3] = arguments[_i];\n        }\n        return __awaiter(this, void 0, void 0, function () {\n            var interfaces, instance;\n            return __generator(this, function (_a) {\n                interfaces = this.getNs(ns), instance = interfaces.get(key);\n                if (!instance) {\n                    throw new errors_1.ModelProxyMissingError(\"\\u6CA1\\u6709\\u53D1\\u73B0/\" + ns + \"/\" + key + \"\\u7684\\u63A5\\u53E3\\u65B9\\u6CD5\\uFF01\");\n                }\n                return [2, instance.execute.apply(instance, [options].concat(otherOptions))];\n            });\n        });\n    };\n    ModelProxy.prototype.executeAll = function (inters) {\n        return __awaiter(this, void 0, void 0, function () {\n            var maps;\n            return __generator(this, function (_a) {\n                maps = [];\n                if (!inters || !Object.keys(inters).length) {\n                    return [2, new Promise(function (resolve) {\n                            resolve(null);\n                        })];\n                }\n                Object.keys(inters).forEach(function (key) {\n                    maps.push(inters[key]().then(function (data) {\n                        return _a = {},\n                            _a[key] = data,\n                            _a;\n                        var _a;\n                    }));\n                });\n                return [2, Promise.all(maps).then(function (data) {\n                        return data.reduce(function (prev, next) {\n                            return Object.assign({}, prev, next);\n                        });\n                    })];\n            });\n        });\n    };\n    ModelProxy.prototype.race = function (inters) {\n        return __awaiter(this, void 0, void 0, function () {\n            var _this = this;\n            var maps;\n            return __generator(this, function (_a) {\n                maps = inters.map(function (inter) {\n                    if (inter.then) {\n                        return inter;\n                    }\n                    var _a = inter, _b = _a.ns, ns = _b === void 0 ? \"\" : _b, _c = _a.key, key = _c === void 0 ? \"\" : _c, _d = _a.options, options = _d === void 0 ? {} : _d, _e = _a.otherOptions, otherOptions = _e === void 0 ? [] : _e;\n                    return _this.execute.apply(_this, [ns, key, options].concat(otherOptions));\n                });\n                return [2, Promise.race(maps)];\n            });\n        });\n    };\n    ModelProxy.prototype.hasNs = function (ns) {\n        return !!this.nsFactory.get(ns);\n    };\n    ModelProxy.prototype.getNs = function (ns) {\n        if (!this.nsFactory.has(ns)) {\n            throw new errors_1.ModelProxyMissingError(\"\\u6CA1\\u6709\\u627E\\u5230\" + ns + \"\\u7A7A\\u95F4;\");\n        }\n        return this.nsFactory.use(ns);\n    };\n    ModelProxy.prototype.mixin = function (ns) {\n        var keys = [];\n        for (var _i = 1; _i < arguments.length; _i++) {\n            keys[_i - 1] = arguments[_i];\n        }\n        if (!keys.length) {\n            throw new errors_1.ModelProxyMissingError(\"\\u5FC5\\u987B\\u5236\\u5B9A\\u81F3\\u5C11\\u4E00\\u4E2AKey\\uFF01\");\n        }\n        var interfaces = this.getNs(ns), idKeys = [], lastKey = keys.pop(), lastInterface = interfaces.get(lastKey);\n        if (!lastInterface) {\n            return null;\n        }\n        keys.forEach(function (k) {\n            var instance = interfaces.get(k);\n            if (!instance) {\n                throw new errors_1.ModelProxyMissingError(k + \"\\u4E0D\\u5B58\\u5728\\u4E8E\\u7A7A\\u95F4\" + ns + \"\\uFF01\");\n            }\n            idKeys.push(instance);\n        });\n        return function () {\n            var ids = [];\n            for (var _i = 0; _i < arguments.length; _i++) {\n                ids[_i] = arguments[_i];\n            }\n            if (ids.length !== idKeys.length) {\n                throw new Error(\"\\u4F20\\u5165\\u7684\\u53C2\\u6570\\u4E2A\\u6570\\u4E0D\\u6B63\\u786E\\uFF01\");\n            }\n            var paths = [];\n            idKeys.forEach(function (k, idx) {\n                paths.push(k.replacePath({\n                    instance: {\n                        path: k.path + \"/:\" + k.key\n                    },\n                    params: (_a = {},\n                        _a[k.key] = ids[idx],\n                        _a)\n                }));\n                var _a;\n            });\n            lastInterface.path = paths.concat([lastInterface.path]).join(\"\");\n            return lastInterface;\n        };\n    };\n    ModelProxy.prototype.initInterfaces = function (ifFactory, config, overrideInterfaceConfig) {\n        var _this = this;\n        if (overrideInterfaceConfig === void 0) { overrideInterfaceConfig = {}; }\n        config.interfaces.forEach(function (i) {\n            var interModel = Object.assign({}, {\n                engine: config.engine,\n                mockDir: config.mockDir,\n                ns: config.key,\n                state: config.state,\n                states: config.states,\n                defaultExecuteInfo: _this.defaultExecuteInfo\n            }, i, overrideInterfaceConfig || {});\n            ifFactory.add(i.key, interModel, true);\n        });\n        return ifFactory;\n    };\n    return ModelProxy;\n}(compose_1.Compose));\nexports.ModelProxy = ModelProxy;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar proxy_1 = require(\"./libs/proxy\");\nexports.ModelProxy = proxy_1.ModelProxy;\nvar compose_1 = require(\"./libs/compose\");\nexports.Compose = compose_1.Compose;\nvar engine_factory_1 = require(\"./libs/engine.factory\");\nexports.engineFactory = engine_factory_1.engineFactory;\nvar errors_1 = require(\"./libs/errors\");\nexports.BaseError = errors_1.BaseError;\nexports.ModelProxyMissingError = errors_1.ModelProxyMissingError;\nvar engine_base_1 = require(\"./engines/engine.base\");\nexports.BaseEngine = engine_base_1.BaseEngine;\nvar engine_def_1 = require(\"./engines/engine.def\");\nexports.DefaultEngine = engine_def_1.DefaultEngine;\nvar base_factory_1 = require(\"./libs/base.factory\");\nexports.BaseFactory = base_factory_1.BaseFactory;\nvar engine_cache_1 = require(\"./engines/engine.cache\");\nexports.cacheDec = engine_cache_1.cacheDec;\nexports.promiseFactory = engine_cache_1.promiseFactory;\n"],"sourceRoot":""}